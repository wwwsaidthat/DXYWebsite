<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PDF 文档阅览 - 我的个人博客</title>
<link rel="stylesheet" href="styles.css">
<style>
  .pdf-container {
    width: 100%;
    height: 800px;
    border: none;
    background-color: #1e1e1e; /* Match theme */
  }
  @media (max-width: 640px) {
    .pdf-container {
      height: 500px;
    }
  }
</style>
</head>
<body>
<header class="site-header">
<div class="container header-inner">
<div class="logo">我的博客</div>
<nav class="nav">
<a href="index.html" class="nav-link">首页</a>
<a href="posts.html" class="nav-link">文章</a>
<a href="about.html" class="nav-link">关于</a>
</nav>
</div>
</header>
<main class="site-main">
<section class="section">
<div class="container">
<article class="post-detail">
<h1 class="post-title">PDF 文档阅览</h1>
<div class="post-meta" id="pdf-file-name"></div>
<div class="post-content" id="pdf-content">
  <!-- PDF iframe will be inserted here -->
</div>
</article>
<a href="posts.html" class="button secondary">返回文章列表</a>
</div>
</section>
</main>
<footer class="site-footer">
<div class="container footer-inner">
<span>© <span id="year"></span> 我的个人博客</span>
<span>Powered by GitHub Pages</span>
</div>
</footer>
<script>
document.getElementById("year").textContent = new Date().getFullYear();

function getFileFromQuery() {
  var params = new URLSearchParams(window.location.search);
  return params.get("file");
}

function showMessage(message) {
  var container = document.getElementById("pdf-content");
  container.innerHTML = '<p>' + message + '</p>';
}

function initPdfViewer() {
  var file = getFileFromQuery();
  var nameEl = document.getElementById("pdf-file-name");
  
  if (!file) {
    nameEl.textContent = "未指定文件";
    showMessage("请在链接后添加 ?file=posts/xxx/文件名.pdf 来指定要展示的 PDF 文件。");
    return;
  }
  
  nameEl.textContent = file;
  
  // Create iframe to display PDF
  var container = document.getElementById("pdf-content");
  // Using native browser PDF viewer via iframe
  var iframe = document.createElement('iframe');
  iframe.src = file;
  iframe.className = 'pdf-container';
  
  // Fallback content if iframe is not supported or PDF plugin missing
  iframe.innerHTML = '<p>您的浏览器不支持直接预览 PDF，请 <a href="' + file + '">点击此处下载</a> 查看。</p>';
  
  container.innerHTML = '';
  container.appendChild(iframe);
}

initPdfViewer();
</script>
</body>
</html>
